@using System.Security.Claims;
@using ViewDiagrams.Models.Helpers

<div class="d-flex flex-row align-items-center border-bottom up-panel">
	<button class="p-4 btn" style="background-color:transparent" onclick="SinkWorkspace()">
		<i class="bi bi-save fs-4"></i>
		Save
	</button>

	@* User *@
	<div class="ms-auto dropdown pe-2">
		<a href="#"
		   class="d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle"
		   id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
			@* <img src="./iser_icon.png" alt="User" width="24" height="24" class="rounded-circle"> *@
			<i class="bi bi-person-circle fs-2"></i>
		</a>
		<ul class="dropdown-menu dropdown-menu-end text-small shadow" aria-labelledby="dropdownUser">
			
			@if (User.Identity.IsAuthenticated)
			{
				<li>
					<div class="d-flex flex-row align-items-center ps-3">
					<i class="bi bi-person-circle fs-2"></i>
					<div class="m-2">
							<p class="m-0 pb-0">@User.GetUserName()</p>
							<p class="m-0 pb-0">@User.GetUserEmail()</p>
						</div>
					</div>
				</li>
				<li><hr class="dropdown-divider"></li>
			}
			<li><a asp-controller="Workspace" asp-action="Create" class="dropdown-item">Create workspace</a></li>
			<li><a asp-controller="Account" asp-action="Profile" class="dropdown-item">Profile</a></li>

			<li><hr class="dropdown-divider"></li>

			<li>
				@if (User.Identity.IsAuthenticated)
				{
					<a asp-controller="Account" asp-action="Logout" class="dropdown-item">Log out</a>
				}
				else
				{
					<a asp-controller="Account" asp-action="Login" class="dropdown-item">Sign in</a>
				}
			</li>
		</ul>
	</div>
</div>