@using System.Security.Claims
@{
    ViewData["Title"] = "WorkSpace";
}

<div class="d-flex flex-column min-vh-100 min-vw-100" style="max-height: 100vh; max-width: 100vw;">

    @await Html.PartialAsync("Panels/TopPanel")
    <div class="flex-fill d-flex flex-row overflow-hidden">
        @await Html.PartialAsync("Panels/SidePanel")
        @await Html.PartialAsync("Panels/ItemsPanel")
        @await Html.PartialAsync("Panels/WorkspacePanel")
        @await Html.PartialAsync("Panels/DetailsPanel")
    </div>
    @await Html.PartialAsync("Panels/BottomPanel")

</div>
@section Scripts {

    <environment include="Development">
        <script src="~/lib/signalr/dist/signalr.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/lib/signalr/dist/signalr.min.js"></script>
    </environment>

    <script>
        var autoConnectWorkspaceId = @ViewBag.Workspace.Id; 
        var username = '@User.FindFirst(ClaimTypes.Name)?.Value'; 
        var isGuest = @(ViewBag.IsGuest ? "true" : "false");
    </script>

    <environment include="Development">
        @* <script src="~/js/script.js" asp-append-version="true"></script>
        <script src="~/js/sidebars.js" asp-append-version="true"></script>
        <script src="~/js/diagrams.js" asp-append-version="true"></script>
        <script src="~/js/diagrams_list.js" asp-append-version="true"></script>
        <script src="~/js/connectors.js" asp-append-version="true"></script>
        <script src="~/js/details_panel.js" asp-append-version="true"></script>
        <script src="~/js/json_document_viewer.js" asp-append-version="true"></script>
        <script src="~/js/settings_panel.js" asp-append-version="true"></script>
        <script src="~/js/workspace.js" asp-append-version="true"></script> 
        <script src="~/js/chat.js" asp-append-version="true"></script> *@

        <script src="~/js/script.js" asp-append-version="true"></script>
        <script src="~/js/sidebars.js" asp-append-version="true"></script>
        <script src="~/js/diagrams.js" asp-append-version="true"></script>

        <script src="~/js/diagrams/BaseDiagram.js" asp-append-version="true"></script>
        <script src="~/js/diagrams/ClassDiagram.js" asp-append-version="true"></script>
        <script src="~/js/diagrams/Comment.js" asp-append-version="true"></script>
        <script src="~/js/diagrams/Group.js" asp-append-version="true"></script>

        <script src="~/js/connectors.js" asp-append-version="true"></script>
        <script src="~/js/details_panel.js" asp-append-version="true"></script>
        <script src="~/js/json_document_viewer.js" asp-append-version="true"></script>
        <script src="~/js/settings_panel.js" asp-append-version="true"></script>
        <script src="~/js/document.js" asp-append-version="true"></script>
        <script src="~/js/chat.js" asp-append-version="true"></script>

        @* <script type="module" src="~/js/sidebars.js" asp-append-version="true"></script>
        <script type="module" src="~/js/diagrams.js" asp-append-version="true"></script>

        <script type="module" src="~/js/diagrams/BaseDiagram.js" asp-append-version="true"></script>
        <script type="module" src="~/js/diagrams/ClassDiagram.js" asp-append-version="true"></script>
        <script type="module" src="~/js/diagrams/Comment.js" asp-append-version="true"></script>
        <script type="module" src="~/js/diagrams/Group.js" asp-append-version="true"></script>

        <script type="module" src="~/js/connectors.js" asp-append-version="true"></script>
        <script type="module" src="~/js/details_panel.js" asp-append-version="true"></script>
        <script type="module" src="~/js/script.js" asp-append-version="true"></script>
        <script type="module" src="~/js/json_document_viewer.js" asp-append-version="true"></script>
        <script type="module" src="~/js/settings_panel.js" asp-append-version="true"></script>
        <script type="module" src="~/js/workspace.js" asp-append-version="true"></script>
        <script type="module" src="~/js/chat.js" asp-append-version="true"></script> *@

        @* <script type="module" src="~/new_js/index.js" asp-append-version="true"></script> *@
    </environment>
    <environment exclude="Development">
        <script src="~/js/script_full.min.js"></script>
    </environment>

    @if (@ViewBag.IsAdmin)
    {
        @* <script type="module" src="~/new_js/user_list.js" asp-append-version="true"></script> *@
        <script src="~/js/user_list.js" asp-append-version="true"></script>
    }
}